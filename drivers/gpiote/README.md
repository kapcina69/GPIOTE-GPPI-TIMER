# GPIOTE Driver

## Overview
GPIOTE driver manages GPIO output pins in task-controlled mode for hardware-triggered pulse generation.

## Purpose
Configures two output pins (LED1_PIN, LED2_PIN) to be controlled by GPIOTE tasks, enabling zero-latency pulse generation via GPPI connections.

## Task Mode Operation
Unlike normal GPIO:
- **No CPU required**: Pulses generated by hardware events
- **Precise timing**: No interrupt latency
- **Power efficient**: CPU can sleep during operation

## Configuration
- **Drive Strength**: S0S1 (standard drive)
- **Polarity**: LOTOHI (low-to-high transition on task)
- **Initial State**: HIGH (inverted logic - low = pulse active)

## Channel Allocation
Allocates 2 GPIOTE channels:
- **Channel 1**: OUTPUT_PIN_1 (LED1_PIN)
- **Channel 2**: OUTPUT_PIN_2 (LED2_PIN)

## API

### Initialization
```c
nrfx_err_t gpiote_init(uint8_t *ch_pin1, uint8_t *ch_pin2);
```
Initializes GPIOTE instance and allocates channels for both output pins.

**Parameters:**
- `ch_pin1`: Pointer to store allocated channel ID for PIN1
- `ch_pin2`: Pointer to store allocated channel ID for PIN2

**Returns:** NRFX_SUCCESS on success, error code otherwise

## Hardware Flow
```
TIMER.CC_EVENT → GPPI → GPIOTE.TASK → GPIO state change
```

Example pulse generation:
1. Timer CC0 fires → GPPI channel 0 → GPIOTE PIN1 CLR task → Pin goes LOW (pulse start)
2. Timer CC1 fires → GPPI channel 1 → GPIOTE PIN1 SET task → Pin goes HIGH (pulse end)

## Dependencies
- `config.h`: OUTPUT_PIN_1, OUTPUT_PIN_2, GPIOTE_INST_IDX
- `nrfx_gpiote.h`: GPIOTE driver functions
- `nrfx_example.h`: LED pin definitions

## Usage Example
```c
uint8_t ch1, ch2;
nrfx_err_t err = gpiote_init(&ch1, &ch2);
// ch1 and ch2 can now be used with gppi_setup_connections()
```

## Notes
- Pins configured with inverted logic (HIGH = idle, LOW = active pulse)
- Requires DPPI/PPI to trigger tasks from timer events
- IRQ handler registration handled internally
